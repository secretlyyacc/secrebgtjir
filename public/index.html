<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Primary Meta Tags -->
    <title>LyyShop ID - Premium Game Accounts & Digital Streaming Termurah</title>
    <meta name="title" content="LyyShop ID - Premium Game Accounts & Digital Streaming Termurah">
    <meta name="description" content="LyyShop ID: Pusat pembelian akun game premium, Netflix, Spotify, Viu, dan berbagai akun digital lainnya. Proses instan, garansi 100%, harga termurah se-Indonesia!">
    <meta name="keywords" content="akun game, beli akun game, akun genshin impact, akun mobile legends, akun valorant, akun steam, akun netflix premium, akun spotify premium, akun viu, top up game, voucher game, akun discord nitro, akun youtube premium, trial netflix, trial spotify">
    <meta name="author" content="LyyTechID">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="revisit-after" content="3 days">
    <meta name="language" content="Indonesian">
    <meta name="geo.country" content="id">
    <meta name="geo.placename" content="Indonesia">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lyyshop.id">
    <meta property="og:title" content="LyyShop ID - Premium Game Accounts & Digital Streaming Termurah">
    <meta property="og:description" content="Toko digital terpercaya dengan ribuan akun premium game & streaming siap kirim. Proses cepat, garansi 100%, harga termurah!">
    <meta property="og:image" content="https://lyyshop.id/assets/images/banner-main.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="LyyShop ID">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://lyyshop.id">
    <meta property="twitter:title" content="LyyShop ID - Premium Game Accounts & Digital Streaming Termurah">
    <meta property="twitter:description" content="Toko digital terpercaya dengan ribuan akun premium game & streaming siap kirim. Proses cepat, garansi 100%, harga termurah!">
    <meta property="twitter:image" content="https://lyyshop.id/assets/images/banner-main.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://lyyshop.id">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%231e3a8a'/%3E%3Ctext x='50' y='70' font-size='70' text-anchor='middle' fill='%2360a5fa' font-weight='bold'%3EL%3C/text%3E%3C/svg%3E">
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%231e3a8a'/%3E%3Ctext x='50' y='70' font-size='70' text-anchor='middle' fill='%2360a5fa' font-weight='bold'%3EL%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%231e3a8a'/%3E%3Ctext x='50' y='70' font-size='70' text-anchor='middle' fill='%2360a5fa' font-weight='bold'%3EL%3C/text%3E%3C/svg%3E">
    
    <!-- Schema.org markup for Google -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Store",
        "@id": "https://lyyshop.id",
        "name": "LyyShop ID",
        "url": "https://lyyshop.id",
        "logo": "https://lyyshop.id/assets/images/logo.png",
        "image": "https://lyyshop.id/assets/images/banner-main.jpg",
        "description": "Toko digital terpercaya menjual berbagai akun premium game dan streaming dengan harga termurah. Proses instan dan garansi 100%.",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "ID",
            "addressRegion": "Jakarta",
            "addressLocality": "Jakarta Selatan"
        },
        "contactPoint": [
            {
                "@type": "ContactPoint",
                "contactType": "customer service",
                "telephone": "+62-812-3456-7890",
                "email": "support@lyyshop.id",
                "availableLanguage": ["Indonesian", "English"],
                "hoursAvailable": "Mo-Su 00:00-24:00"
            }
        ],
        "sameAs": [
            "https://www.instagram.com/lyyshop.id",
            "https://www.tiktok.com/@lyyshop.id",
            "https://discord.gg/lyyshop",
            "https://wa.me/6281234567890"
        ],
        "priceRange": "Rp 5.000 - Rp 5.000.000",
        "openingHours": "Mo-Su 00:00-24:00",
        "paymentAccepted": ["QRIS", "Bank Transfer", "E-Wallet", "Pulsa"],
        "currenciesAccepted": "IDR"
    }
    </script>

    <!-- Schema.org for Products -->
    <script type="application/ld+json" id="productSchema"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animation Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    
    <style>
        :root {
            --primary-60: #0a2647;
            --primary-30: #1e3a8a;
            --primary-10: #60a5fa;
            --accent-gold: #fbbf24;
            --accent-orange: #f97316;
            --text-light: #f8fafc;
            --text-dark: #1e293b;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(96, 165, 250, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        body {
            background: linear-gradient(135deg, var(--primary-60) 0%, #0f2b4f 100%);
            min-height: 100vh;
            color: var(--text-light);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(96, 165, 250, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-10), var(--primary-30));
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.05);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-30), var(--primary-10));
        }

        /* Navbar Styles */
        .navbar {
            background: rgba(10, 38, 71, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            padding: 12px 0;
            background: rgba(10, 38, 71, 0.95);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .nav-link {
            position: relative;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-10), var(--accent-gold));
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        .nav-link.active {
            color: var(--primary-10);
        }

        /* Banner Styles */
        .banner-container {
            position: relative;
            width: 100%;
            height: min(400px, 50vh);
            overflow: hidden;
            border-radius: clamp(16px, 3vw, 32px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .banner-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.7s ease;
        }

        .banner-container:hover .banner-image {
            transform: scale(1.05);
        }

        .banner-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, var(--primary-60) 0%, transparent 50%, var(--primary-60) 100%);
            opacity: 0.4;
        }

        /* Product Card Styles */
        .product-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: clamp(16px, 3vw, 24px);
            padding: clamp(16px, 3vw, 24px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(96, 165, 250, 0.15), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
        }

        .product-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-10);
            box-shadow: 0 25px 50px -8px rgba(96, 165, 250, 0.25);
        }

        .product-card:hover::before {
            left: 100%;
        }

        .product-image-container {
            width: 100%;
            aspect-ratio: 1/1;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.3), rgba(96, 165, 250, 0.2));
            border-radius: clamp(12px, 2vw, 20px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            position: relative;
        }

        .product-card:hover .product-image-container {
            border-color: var(--primary-10);
            transform: scale(1.02);
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-icon-fallback {
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--primary-10);
        }

        .product-title {
            font-size: clamp(1.25rem, 4vw, 1.5rem);
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .product-price {
            font-size: clamp(1.5rem, 5vw, 2rem);
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-10), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
        }

        .product-stock {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            background: rgba(96, 165, 250, 0.1);
            border: 1px solid var(--primary-10);
            border-radius: 30px;
            font-size: 0.875rem;
            color: var(--primary-10);
            margin-bottom: 16px;
            width: fit-content;
        }

        .product-stock i {
            font-size: 0.75rem;
        }

        .product-description {
            color: #94a3b8;
            font-size: 0.875rem;
            line-height: 1.6;
            margin-bottom: 20px;
            flex-grow: 1;
        }

        /* Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-30), var(--primary-10));
            color: white;
            font-weight: 600;
            padding: 14px 28px;
            border-radius: 14px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1rem;
            width: 100%;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px -8px rgba(96, 165, 250, 0.4);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::after:not(:disabled) {
            left: 100%;
        }

        .btn-secondary {
            background: transparent;
            color: white;
            font-weight: 600;
            padding: 14px 28px;
            border-radius: 14px;
            border: 2px solid var(--primary-10);
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1rem;
        }

        .btn-secondary:hover {
            background: var(--primary-10);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -5px rgba(96, 165, 250, 0.3);
        }

        /* Stat Cards */
        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s ease;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-10);
            box-shadow: 0 20px 40px -10px rgba(96, 165, 250, 0.2);
        }

        .stat-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-30), var(--primary-10));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            transition: all 0.3s ease;
        }

        .stat-card:hover .stat-icon {
            transform: rotate(5deg) scale(1.05);
            box-shadow: 0 10px 20px rgba(96, 165, 250, 0.3);
        }

        .stat-number {
            font-size: clamp(1.5rem, 4vw, 2rem);
            font-weight: 800;
            color: var(--primary-10);
            margin-bottom: 5px;
        }

        /* Feature Items */
        .feature-item {
            text-align: center;
            padding: 20px;
            border-radius: 20px;
            transition: all 0.3s ease;
            height: 100%;
        }

        .feature-item:hover {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: var(--primary-30);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            transition: all 0.3s ease;
        }

        .feature-item:hover .feature-icon {
            background: linear-gradient(135deg, var(--primary-30), var(--primary-10));
            transform: scale(1.1);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 16px;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--primary-60), #0f2b4f);
            border: 1px solid var(--primary-10);
            border-radius: 28px;
            padding: clamp(24px, 5vw, 40px);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-close:hover {
            color: var(--primary-10);
            transform: rotate(90deg);
            background: rgba(255, 255, 255, 0.2);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-light);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 16px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(96, 165, 250, 0.2);
            border-radius: 16px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-10);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.15);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2360a5fa'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 18px center;
            background-size: 20px;
            padding-right: 50px;
        }

        .form-select option {
            background: var(--primary-60);
            color: white;
            padding: 10px;
        }

        /* Payment Info Box */
        .payment-info-box {
            background: var(--primary-30);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--primary-10);
        }

        .payment-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payment-detail-item:last-child {
            border-bottom: none;
        }

        .payment-detail-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .payment-detail-value {
            color: white;
            font-weight: 600;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(10, 38, 71, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid var(--primary-10);
            border-radius: 16px;
            padding: 16px 24px;
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: slideInRight 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            max-width: 350px;
            width: calc(100% - 32px);
            pointer-events: none;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Loading Spinner */
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary-10);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Category Pills */
        .category-pill {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 40px;
            color: white;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .category-pill:hover,
        .category-pill.active {
            background: linear-gradient(135deg, var(--primary-30), var(--primary-10));
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(96, 165, 250, 0.3);
        }

        /* Footer */
        .footer {
            background: rgba(10, 38, 71, 0.95);
            backdrop-filter: blur(12px);
            border-top: 1px solid var(--glass-border);
            padding: 50px 0 20px;
            margin-top: 60px;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.6);
            transition: color 0.3s ease;
            text-decoration: none;
            font-size: 0.95rem;
            display: inline-block;
            padding: 5px 0;
        }

        .footer-link:hover {
            color: var(--primary-10);
            transform: translateX(5px);
        }

        .social-icon {
            width: 44px;
            height: 44px;
            background: rgba(96, 165, 250, 0.1);
            border: 1px solid var(--primary-10);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
        }

        .social-icon:hover {
            background: var(--primary-10);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px -5px rgba(96, 165, 250, 0.4);
        }

        /* Responsive Utilities */
        .text-responsive {
            font-size: clamp(1rem, 4vw, 1.5rem);
        }

        .container-custom {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 clamp(16px, 5vw, 40px);
        }

        /* Grid Layouts */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(100%, 320px), 1fr));
            gap: clamp(16px, 3vw, 30px);
        }

        /* Mobile Optimizations */
        @media (max-width: 640px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .banner-container {
                height: 200px;
            }
            
            .stat-card {
                padding: 20px;
            }
            
            .modal-content {
                padding: 24px;
            }
            
            .btn-primary, .btn-secondary {
                padding: 14px 20px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .product-title {
                font-size: 1.2rem;
            }
            
            .product-price {
                font-size: 1.4rem;
            }
            
            .stat-number {
                font-size: 1.3rem;
            }
        }

        /* Tablet Optimizations */
        @media (min-width: 641px) and (max-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Landscape Mode */
        @media (max-height: 600px) and (orientation: landscape) {
            .banner-container {
                height: 150px;
            }
            
            .modal-content {
                max-height: 85vh;
            }
        }

        /* High-end Displays */
        @media (min-width: 1920px) {
            .container-custom {
                max-width: 1600px;
            }
            
            .product-card {
                padding: 30px;
            }
        }

        /* Print Styles */
        @media print {
            .navbar, .footer, .btn-primary, .modal-overlay {
                display: none;
            }
        }

        /* Image Error Handling */
        .img-error {
            display: flex !important;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.5), rgba(96, 165, 250, 0.3));
        }
        
        .img-error i {
            font-size: 3rem;
            color: var(--primary-10);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 py-3 sm:py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2 sm:gap-4">
                <div class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#1e3a8a] to-[#60a5fa] rounded-xl flex items-center justify-center">
                    <span class="text-white font-bold text-xl sm:text-2xl">L</span>
                </div>
                <div>
                    <span class="text-xl sm:text-2xl font-bold block leading-tight">LyyTech<span class="text-[#60a5fa]">ID</span></span>
                    <span class="text-xs text-gray-400 hidden sm:block">Premium Digital Store</span>
                </div>
            </div>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center gap-6 lg:gap-8">
                <a href="#home" class="nav-link text-white font-medium">Home</a>
                <a href="#products" class="nav-link text-white font-medium">Products</a>
                <a href="#categories" class="nav-link text-white font-medium">Categories</a>
                <a href="#features" class="nav-link text-white font-medium">Features</a>
            </div>
            
            <!-- Mobile Menu Button -->
            <button id="mobileMenuBtn" class="md:hidden text-white text-2xl">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="https://wa.me/6281234567890" target="_blank" class="btn-primary hidden sm:flex items-center gap-2 w-auto px-4 sm:px-6">
                <i class="fab fa-whatsapp"></i>
                <span class="hidden lg:inline">Contact</span>
            </a>
        </div>
        
        <!-- Mobile Menu Dropdown -->
        <div id="mobileMenu" class="md:hidden hidden mt-4 bg-[#0a2647] rounded-2xl p-4 border border-[#60a5fa]/20">
            <a href="#home" class="block py-3 px-4 hover:bg-[#1e3a8a] rounded-xl transition">Home</a>
            <a href="#products" class="block py-3 px-4 hover:bg-[#1e3a8a] rounded-xl transition">Products</a>
            <a href="#categories" class="block py-3 px-4 hover:bg-[#1e3a8a] rounded-xl transition">Categories</a>
            <a href="#features" class="block py-3 px-4 hover:bg-[#1e3a8a] rounded-xl transition">Features</a>
            <a href="https://wa.me/6281234567890" target="_blank" class="block py-3 px-4 bg-[#1e3a8a] rounded-xl mt-2 text-center">
                <i class="fab fa-whatsapp mr-2"></i>Contact
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20 sm:pt-24 pb-12 px-4 container-custom">
        <!-- Banner Section -->
        <section id="home" class="mb-12 sm:mb-16" data-aos="fade-up">
            <div class="banner-container">
                <img src="https://shop.lyxtech.xyz/img/banner.png" 
                     alt="LyyShop ID Banner - Premium Game & Streaming Accounts" 
                     class="banner-image">
                <div class="banner-overlay"></div>
            </div>
            
            <div class="text-center mt-6 sm:mt-8">
                <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-3 sm:mb-4 bg-gradient-to-r from-[#60a5fa] via-[#fbbf24] to-[#f97316] bg-clip-text text-transparent">
                    Premium Digital Accounts
                </h1>
                <p class="text-base sm:text-lg md:text-xl text-gray-300 max-w-3xl mx-auto px-4">
                    Dapatkan akun game premium & streaming (Netflix, Spotify, Viu, dll) dengan harga termurah, proses instan, dan garansi 100%!
                </p>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-12 sm:mb-16">
            <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
                <div class="stat-icon">
                    <i class="fas fa-users text-2xl sm:text-3xl text-white"></i>
                </div>
                <div class="stat-number">15.2K+</div>
                <div class="text-gray-400 text-sm sm:text-base">Happy Customers</div>
                <div class="text-xs text-gray-500 mt-1">Trusted since 2023</div>
            </div>
            
            <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
                <div class="stat-icon">
                    <i class="fas fa-gamepad text-2xl sm:text-3xl text-white"></i>
                </div>
                <div class="stat-number">8.7K+</div>
                <div class="text-gray-400 text-sm sm:text-base">Accounts Sold</div>
                <div class="text-xs text-gray-500 mt-1">Verified accounts</div>
            </div>
            
            <div class="stat-card" data-aos="fade-up" data-aos-delay="300">
                <div class="stat-icon">
                    <i class="fas fa-bolt text-2xl sm:text-3xl text-white"></i>
                </div>
                <div class="stat-number">Instant</div>
                <div class="text-gray-400 text-sm sm:text-base">Delivery</div>
                <div class="text-xs text-gray-500 mt-1">After payment</div>
            </div>

            <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
                <div class="stat-icon">
                    <i class="fas fa-shield-alt text-2xl sm:text-3xl text-white"></i>
                </div>
                <div class="stat-number">100%</div>
                <div class="text-gray-400 text-sm sm:text-base">Garansi</div>
                <div class="text-xs text-gray-500 mt-1">Money back guarantee</div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="categories" class="mb-12 sm:mb-16">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-8 sm:mb-12" data-aos="fade-up">
                Browse <span class="text-[#60a5fa]">Categories</span>
            </h2>
            
            <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-8" data-aos="fade-up">
                <button class="category-pill active" data-category="all">All Products</button>
                <button class="category-pill" data-category="game">üéÆ Games</button>
                <button class="category-pill" data-category="streaming">üì∫ Streaming</button>
                <button class="category-pill" data-category="music">üéµ Music</button>
                <button class="category-pill" data-category="trial">‚è±Ô∏è Trial</button>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="mb-12 sm:mb-16">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-8 sm:mb-12" data-aos="fade-up">
                Our <span class="text-[#60a5fa]">Premium Products</span>
            </h2>
            
            <!-- Loading State -->
            <div id="loadingContainer" class="flex justify-center items-center py-12 hidden" data-aos="fade-up">
                <div class="spinner"></div>
                <span class="ml-4 text-gray-400">Loading products...</span>
            </div>
            
            <!-- Error State -->
            <div id="errorContainer" class="hidden text-center py-12" data-aos="fade-up">
                <i class="fas fa-exclamation-triangle text-4xl text-yellow-500 mb-4"></i>
                <p class="text-gray-400">Failed to load products. Please refresh the page.</p>
                <button onclick="loadProducts()" class="btn-primary w-auto mt-4 px-8">
                    <i class="fas fa-sync-alt mr-2"></i>Retry
                </button>
            </div>
            
            <!-- Products Grid -->
            <div id="productContainer" class="products-grid">
                <!-- Products will be loaded here via JavaScript -->
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-12 sm:mb-16">
            <div class="feature-item" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt text-2xl sm:text-3xl text-[#60a5fa]"></i>
                </div>
                <h3 class="font-bold text-lg sm:text-xl mb-2">100% Secure</h3>
                <p class="text-gray-400 text-sm">All accounts are verified and guaranteed original</p>
            </div>
            
            <div class="feature-item" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-icon">
                    <i class="fas fa-bolt text-2xl sm:text-3xl text-[#60a5fa]"></i>
                </div>
                <h3 class="font-bold text-lg sm:text-xl mb-2">Instant Delivery</h3>
                <p class="text-gray-400 text-sm">Receive account details immediately after payment</p>
            </div>
            
            <div class="feature-item" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-icon">
                    <i class="fas fa-headset text-2xl sm:text-3xl text-[#60a5fa]"></i>
                </div>
                <h3 class="font-bold text-lg sm:text-xl mb-2">24/7 Support</h3>
                <p class="text-gray-400 text-sm">Our team is always ready to help you anytime</p>
            </div>
            
            <div class="feature-item" data-aos="fade-up" data-aos-delay="400">
                <div class="feature-icon">
                    <i class="fas fa-money-bill-wave text-2xl sm:text-3xl text-[#60a5fa]"></i>
                </div>
                <h3 class="font-bold text-lg sm:text-xl mb-2">Best Price</h3>
                <p class="text-gray-400 text-sm">Competitive prices with regular promotions</p>
            </div>
        </section>

        <!-- Payment Methods -->
        <section class="mb-12 sm:mb-16">
            <h2 class="text-xl sm:text-2xl font-bold text-center mb-6" data-aos="fade-up">
                Payment Methods
            </h2>
            <div class="flex flex-wrap justify-center gap-4" data-aos="fade-up">
                <div class="bg-white/5 px-4 py-2 rounded-xl border border-[#60a5fa]/20">
                    <i class="fas fa-credit-card text-[#60a5fa] mr-2"></i>
                    <span>QRIS</span>
                </div>
                <div class="bg-white/5 px-4 py-2 rounded-xl border border-[#60a5fa]/20">
                    <i class="fas fa-university text-[#60a5fa] mr-2"></i>
                    <span>Bank Transfer</span>
                </div>
                <div class="bg-white/5 px-4 py-2 rounded-xl border border-[#60a5fa]/20">
                    <i class="fas fa-wallet text-[#60a5fa] mr-2"></i>
                    <span>E-Wallet</span>
                </div>
                <div class="bg-white/5 px-4 py-2 rounded-xl border border-[#60a5fa]/20">
                    <i class="fas fa-mobile-alt text-[#60a5fa] mr-2"></i>
                    <span>Pulsa</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container-custom">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-[#1e3a8a] to-[#60a5fa] rounded-xl flex items-center justify-center">
                            <span class="text-white font-bold text-xl">L</span>
                        </div>
                        <span class="text-xl font-bold">LyyTech<span class="text-[#60a5fa]">ID</span></span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4 leading-relaxed">
                        Toko digital terpercaya sejak 2023. Menyediakan berbagai akun premium game dan streaming dengan harga termurah dan garansi 100%.
                    </p>
                    <div class="flex gap-3">
                        <a href="#" class="social-icon">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-icon">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="#" class="social-icon">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="#" class="social-icon">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>About Us</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Terms of Service</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Privacy Policy</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>FAQ</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Refund Policy</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg mb-4">Categories</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Game Accounts</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Netflix Premium</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Spotify Premium</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Viu Premium</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2 text-[#60a5fa]"></i>Free Trial</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg mb-4">Contact</h4>
                    <ul class="space-y-3">
                        <li class="flex items-center gap-3">
                            <i class="fas fa-envelope text-[#60a5fa] w-5"></i>
                            <span class="footer-link">support@lyyshop.id</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-phone text-[#60a5fa] w-5"></i>
                            <span class="footer-link">+62 812 3456 7890</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-map-marker-alt text-[#60a5fa] w-5"></i>
                            <span class="footer-link">Jakarta, Indonesia</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-clock text-[#60a5fa] w-5"></i>
                            <span class="footer-link">24/7 Online</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-[#1e3a8a] pt-6 text-center text-gray-500 text-sm">
                <p>&copy; 2024 LyyShop ID. All rights reserved. | Premium Digital Store</p>
                <p class="mt-2 text-xs">Made with <i class="fas fa-heart text-[#60a5fa]"></i> for Indonesian gamers</p>
            </div>
        </div>
    </footer>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal-overlay">
        <div class="modal-content relative">
            <span class="modal-close" onclick="closeCheckoutModal()">&times;</span>
            
            <h2 class="text-xl sm:text-2xl font-bold mb-2">Complete Your Order</h2>
            <p class="text-gray-400 text-sm mb-6">Fill in your details to proceed</p>
            
            <div id="selectedProductInfo" class="bg-[#1e3a8a] rounded-xl p-4 mb-6">
                <p id="selectedProductName" class="text-lg font-semibold text-[#60a5fa]"></p>
                <p id="selectedProductPrice" class="text-2xl font-bold mt-1"></p>
            </div>
            
            <form id="checkoutForm" class="space-y-4">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input 
                        type="email"
                        id="customerEmail"
                        placeholder="your@email.com"
                        required
                        class="form-input"
                    >
                    <p class="text-xs text-gray-400 mt-1">Account details will be sent here</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Payment Method</label>
                    <select id="paymentMethod" class="form-select" required>
                        <option value="">Select payment method</option>
                    </select>
                </div>
                
                <button type="submit" id="payButton" class="btn-primary mt-4">
                    <i class="fas fa-shopping-cart mr-2"></i>
                    Continue to Payment
                </button>
            </form>
            
            <div id="paymentInfo" class="payment-info-box hidden">
                <h3 class="font-bold mb-3">Payment Details</h3>
                <div id="paymentDetails" class="space-y-2"></div>
                <div class="flex gap-3 mt-4">
                    <a href="#" id="paymentLink" target="_blank" class="flex-1 btn-primary text-center text-sm py-3">
                        Pay Now
                    </a>
                    <button id="checkStatus" class="flex-1 btn-secondary text-sm py-3">
                        Check Status
                    </button>
                </div>
            </div>
            
            <div class="text-center text-xs text-gray-400 mt-4">
                <i class="fas fa-lock mr-1"></i> Secure payment
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="text-5xl sm:text-6xl mb-4 animate-bounce">üéâ</div>
            <h2 class="text-xl sm:text-2xl font-bold mb-3">Payment Successful!</h2>
            <p class="mb-2 text-gray-300">Your account details have been sent to:</p>
            <p id="successEmail" class="text-[#60a5fa] font-bold text-lg mb-4 break-all"></p>
            
            <div class="bg-[#1e3a8a] p-4 rounded-xl mb-6">
                <p class="text-sm text-gray-300 mb-2">Check your email inbox (or spam folder)</p>
                <i class="fas fa-envelope-open-text text-3xl text-[#60a5fa]"></i>
            </div>
            
            <div class="flex gap-3">
                <button onclick="closeSuccessModal()" class="flex-1 btn-primary">
                    Got It
                </button>
                <a href="#products" onclick="closeSuccessModal()" class="flex-1 btn-secondary">
                    Shop Again
                </a>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true,
            offset: 50
        });

        let currentProduct = null;
        let currentOrderId = null;
        let statusChecker = null;
        let allProducts = [];

        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        });

        // Close mobile menu when clicking a link
        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('mobileMenu').classList.add('hidden');
            });
        });

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Category filter
        document.querySelectorAll('.category-pill').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-pill').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                filterProducts(this.dataset.category);
            });
        });

        function filterProducts(category) {
            if (category === 'all') {
                displayProducts(allProducts);
            } else {
                const filtered = allProducts.filter(p => p.category === category);
                displayProducts(filtered);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            loadPaymentMethods();
        });

        // Load products from API
        async function loadProducts() {
            try {
                showLoading(true);
                document.getElementById('errorContainer').classList.add('hidden');
                
                const res = await fetch('/api/roles');
                if (!res.ok) throw new Error('Failed to load products');
                
                const data = await res.json();
                allProducts = data.roles || [];
                
                // Add category based on product name/description
                allProducts = allProducts.map(product => {
                    let category = 'game'; // default
                    const name = (product.name || '').toLowerCase();
                    const desc = (product.description || '').toLowerCase();
                    
                    if (name.includes('netflix') || name.includes('viu') || desc.includes('streaming') || name.includes('disney') || name.includes('hbo') || name.includes('prime')) {
                        category = 'streaming';
                    } else if (name.includes('spotify') || name.includes('music') || name.includes('joox') || name.includes('langit musik') || name.includes('youtube music')) {
                        category = 'music';
                    } else if (name.includes('trial') || name.includes('coba') || desc.includes('trial') || name.includes('free')) {
                        category = 'trial';
                    }
                    
                    return { ...product, category };
                });
                
                displayProducts(allProducts);
                updateProductSchema(allProducts);
                
            } catch (error) {
                console.error('Error loading products:', error);
                document.getElementById('errorContainer').classList.remove('hidden');
                showToast('Failed to load products', 'error');
            } finally {
                showLoading(false);
            }
        }

        // Update product schema for SEO
        function updateProductSchema(products) {
            const productSchema = {
                "@context": "https://schema.org",
                "@type": "ItemList",
                "itemListElement": products.slice(0, 10).map((product, index) => ({
                    "@type": "Product",
                    "position": index + 1,
                    "name": product.name,
                    "description": product.description || product.name,
                    "image": product.image || '',
                    "offers": {
                        "@type": "Offer",
                        "price": product.price,
                        "priceCurrency": "IDR",
                        "availability": parseInt(product.stock) > 0 ? "https://schema.org/InStock" : "https://schema.org/OutOfStock"
                    }
                }))
            };
            
            document.getElementById('productSchema').textContent = JSON.stringify(productSchema);
        }

        // Function to handle image error
        function handleImageError(img) {
            const container = img.parentElement;
            img.style.display = 'none';
            
            // Create fallback icon
            const fallbackIcon = document.createElement('i');
            fallbackIcon.className = 'fas fa-crown product-icon-fallback';
            container.appendChild(fallbackIcon);
            
            // Add error class to container
            container.classList.add('img-error');
        }

        // Display products
        function displayProducts(products) {
            const container = document.getElementById('productContainer');
            if (!products || products.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-400 col-span-full py-12">No products available</p>';
                return;
            }

            container.innerHTML = products.map(product => {
                const price = Number(product.price) || 0;
                const stock = Number(product.stock) || 0;
                const isOutOfStock = stock <= 0;
                const imageUrl = product.image || '';
                const category = product.category || 'game';

                // Escape HTML special characters for safety
                const safeName = escapeHtml(product.name);
                const safeDescription = escapeHtml(product.description || 'Premium account with full features');

                return `
                    <div class="product-card" data-aos="fade-up">
                        <div class="product-image-container" id="img-container-${product.id}">
                            ${imageUrl ? 
                                `<img src="${imageUrl}" 
                                     alt="${safeName}" 
                                     class="product-image"
                                     loading="lazy"
                                     onerror="handleImageError(this)"
                                     data-product-id="${product.id}">` 
                                : `<i class="fas fa-crown product-icon-fallback"></i>`
                            }
                        </div>
                        <h3 class="product-title">${safeName}</h3>
                        <div class="product-price">Rp ${price.toLocaleString('id-ID')}</div>
                        <div class="product-stock">
                            <i class="fas fa-box"></i>
                            <span>Stock: ${stock}</span>
                        </div>
                        <p class="product-description">${safeDescription}</p>
                        <button 
                            onclick='openCheckout(${JSON.stringify({
                                id: product.id,
                                name: product.name,
                                price: price,
                                category: category
                            }).replace(/'/g, "&apos;")})'
                            class="btn-primary ${isOutOfStock ? 'opacity-50 cursor-not-allowed' : ''}"
                            ${isOutOfStock ? 'disabled' : ''}>
                            <i class="fas ${getCategoryIcon(category)}"></i>
                            ${isOutOfStock ? 'Out of Stock' : 'Buy Now'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        // Helper function to escape HTML
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function getCategoryIcon(category) {
            const icons = {
                game: 'fa-gamepad',
                streaming: 'fa-film',
                music: 'fa-music',
                trial: 'fa-hourglass-half'
            };
            return icons[category] || 'fa-crown';
        }

        // Load payment methods
        async function loadPaymentMethods() {
            try {
                // Try to fetch from API first
                let methods = [];
                
                try {
                    const res = await fetch('/api/payment/methods');
                    if (res.ok) {
                        const data = await res.json();
                        methods = data.methods || [];
                    }
                } catch (e) {
                    console.log('Using default payment methods');
                }
                
                // Fallback to default methods if API fails
                if (methods.length === 0) {
                    methods = [
                        { id: 'qris', name: 'QRIS (All E-Wallet)' },
                        { id: 'bca', name: 'Bank BCA' },
                        { id: 'mandiri', name: 'Bank Mandiri' },
                        { id: 'bri', name: 'Bank BRI' },
                        { id: 'bni', name: 'Bank BNI' },
                        { id: 'ovo', name: 'OVO' },
                        { id: 'gopay', name: 'GoPay' },
                        { id: 'dana', name: 'DANA' },
                        { id: 'linkaja', name: 'LinkAja' },
                        { id: 'pulsa', name: 'Pulsa (Telkomsel/XL)' }
                    ];
                }
                
                const select = document.getElementById('paymentMethod');
                select.innerHTML = '<option value="">Select Payment Method</option>';
                methods.forEach(m => {
                    select.innerHTML += `<option value="${m.id}">${escapeHtml(m.name)}</option>`;
                });
            } catch (error) {
                console.error('Error loading payment methods:', error);
            }
        }

        // Open checkout modal
        function openCheckout(product) {
            currentProduct = product;
            document.getElementById('selectedProductName').textContent = product.name;
            document.getElementById('selectedProductPrice').textContent = `Rp ${product.price.toLocaleString('id-ID')}`;
            document.getElementById('checkoutModal').classList.add('active');
            document.getElementById('paymentInfo').classList.add('hidden');
            document.getElementById('customerEmail').value = '';
            document.body.style.overflow = 'hidden';
        }

        // Close checkout modal
        function closeCheckoutModal() {
            document.getElementById('checkoutModal').classList.remove('active');
            document.body.style.overflow = '';
            if (statusChecker) clearInterval(statusChecker);
        }

        // Handle checkout form
        document.getElementById('checkoutForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('customerEmail').value.trim();
            const paymentMethod = document.getElementById('paymentMethod').value;

            if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }

            if (!paymentMethod) {
                showToast('Please select payment method', 'error');
                return;
            }

            const payButton = document.getElementById('payButton');
            payButton.disabled = true;
            payButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';

            try {
                // Call your payment API
                const res = await fetch('/api/payment/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: email,
                        roleId: currentProduct.id,
                        paymentMethod
                    })
                });

                const data = await res.json();

                if (data.success) {
                    currentOrderId = data.orderId;
                    
                    document.getElementById('paymentInfo').classList.remove('hidden');
                    
                    const paymentLink = data.redirectUrl || data.payment?.url;
                    if (paymentLink) {
                        document.getElementById('paymentLink').href = paymentLink;
                        document.getElementById('paymentLink').style.display = 'flex';
                    } else {
                        document.getElementById('paymentLink').style.display = 'none';
                    }

                    const paymentDetails = document.getElementById('paymentDetails');
                    paymentDetails.innerHTML = `
                        <div class="payment-detail-item">
                            <span class="payment-detail-label">Order ID</span>
                            <span class="payment-detail-value">${data.orderId}</span>
                        </div>
                        <div class="payment-detail-item">
                            <span class="payment-detail-label">Total</span>
                            <span class="payment-detail-value">Rp ${(data.amount || currentProduct.price).toLocaleString('id-ID')}</span>
                        </div>
                        <div class="payment-detail-item">
                            <span class="payment-detail-label">Method</span>
                            <span class="payment-detail-value">${getPaymentMethodName(paymentMethod)}</span>
                        </div>
                        <div class="payment-detail-item">
                            <span class="payment-detail-label">Status</span>
                            <span class="payment-detail-value text-yellow-400">Waiting Payment</span>
                        </div>
                    `;

                    startStatusCheck(data.orderId);
                    showToast('Payment created successfully', 'success');
                } else {
                    showToast(data.error || 'Failed to create payment', 'error');
                }
            } catch (error) {
                showToast('An error occurred', 'error');
                console.error('Payment error:', error);
            } finally {
                payButton.disabled = false;
                payButton.innerHTML = '<i class="fas fa-shopping-cart mr-2"></i> Continue to Payment';
            }
        });

        function getPaymentMethodName(methodId) {
            const methods = {
                'qris': 'QRIS',
                'bca': 'Bank BCA',
                'mandiri': 'Bank Mandiri',
                'bri': 'Bank BRI',
                'bni': 'Bank BNI',
                'ovo': 'OVO',
                'gopay': 'GoPay',
                'dana': 'DANA',
                'linkaja': 'LinkAja',
                'pulsa': 'Pulsa'
            };
            return methods[methodId] || methodId;
        }

        // Check payment status
        function startStatusCheck(orderId) {
            if (statusChecker) clearInterval(statusChecker);

            statusChecker = setInterval(async () => {
                try {
                    const res = await fetch('/api/order/' + orderId);
                    const data = await res.json();

                    if (data.order?.status === 'completed') {
                        clearInterval(statusChecker);
                        
                        closeCheckoutModal();
                        
                        document.getElementById('successEmail').textContent = document.getElementById('customerEmail').value;
                        document.getElementById('successModal').classList.add('active');
                        
                        showToast('Payment successful!', 'success');
                    }
                } catch (error) {
                    console.error('Status check error:', error);
                }
            }, 5000);
        }

        // Check status manually
        document.getElementById('checkStatus').addEventListener('click', async () => {
            if (!currentOrderId) return;
            
            try {
                const res = await fetch('/api/order/' + currentOrderId);
                const data = await res.json();

                if (data.order?.status === 'completed') {
                    clearInterval(statusChecker);
                    closeCheckoutModal();
                    document.getElementById('successEmail').textContent = document.getElementById('customerEmail').value;
                    document.getElementById('successModal').classList.add('active');
                } else {
                    showToast(`Status: ${data.order?.status || 'PENDING'}`, 'info');
                }
            } catch (error) {
                showToast('Failed to check status', 'error');
            }
        });

        // Close success modal
        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
            document.body.style.overflow = '';
            loadProducts(); // Refresh products to update stock
        }

        // Show loading
        function showLoading(show) {
            const loadingContainer = document.getElementById('loadingContainer');
            if (show) {
                loadingContainer.classList.remove('hidden');
            } else {
                loadingContainer.classList.add('hidden');
            }
        }

        // Show toast
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${
                type === 'error' ? 'bg-red-600' : 
                type === 'success' ? 'bg-green-600' : 
                'bg-blue-600'
            }`;
            toast.classList.remove('hidden');

            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // Close modals on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                    if (overlay.id === 'checkoutModal' && statusChecker) {
                        clearInterval(statusChecker);
                    }
                }
            });
        });

        // Close modals with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    if (modal.id === 'checkoutModal' && statusChecker) {
                        clearInterval(statusChecker);
                    }
                });
            }
        });

        // Make handleImageError available globally
        window.handleImageError = handleImageError;
    </script>
</body>
</html>