<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    
    <!-- Primary Meta Tags -->
    <title>LyyShop ID - Premium Game Accounts & Digital Streaming Termurah</title>
    <meta name="title" content="LyyShop ID - Premium Game Accounts & Digital Streaming Termurah">
    <meta name="description" content="LyyShop ID: Pusat pembelian akun game premium, Netflix, Spotify, Viu, dan berbagai akun digital lainnya. Proses instan, garansi 100%, harga termurah se-Indonesia!">
    <meta name="keywords" content="akun game, beli akun game, akun genshin impact, akun mobile legends, akun valorant, akun steam, akun netflix premium, akun spotify premium, akun viu, top up game, voucher game">
    <meta name="author" content="LyyTechID">
    <meta name="robots" content="index, follow">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/img/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/logo.png">
    <link rel="apple-touch-icon" href="/img/logo.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animation Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        :root {
            --primary-60: #0284c7;
            --primary-30: #38bdf8;
            --primary-10: #7dd3fc;
            --accent-gold: #fbbf24;
            --accent-orange: #f97316;
            --text-light: #f8fafc;
            --text-dark: #0c4a6e;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(125, 211, 252, 0.3);
            --safe-area-top: env(safe-area-inset-top);
            --safe-area-bottom: env(safe-area-inset-bottom);
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        body {
            background: linear-gradient(135deg, #0284c7 0%, #38bdf8 50%, #7dd3fc 100%);
            min-height: 100vh;
            color: var(--text-light);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 60%);
            pointer-events: none;
            z-index: -1;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-30), white);
            border-radius: 10px;
            border: 2px solid transparent;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, white, var(--primary-30));
        }

        /* Navbar */
        .navbar {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .nav-link {
            position: relative;
            transition: all 0.3s ease;
            font-weight: 600;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background: white;
            transition: width 0.3s ease;
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        /* Banner */
        .banner-container {
            position: relative;
            width: 100%;
            height: min(500px, 60vh);
            overflow: hidden;
            border-radius: clamp(24px, 5vw, 48px);
            box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.3);
        }

        .banner-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.7s ease;
        }

        .banner-container:hover .banner-image {
            transform: scale(1.05);
        }

        .banner-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, rgba(2, 132, 199, 0.4) 0%, transparent 50%, rgba(2, 132, 199, 0.4) 100%);
        }

        /* Product Card */
        .product-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: clamp(24px, 4vw, 32px);
            padding: clamp(24px, 4vw, 32px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.2);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
        }

        .product-card:hover {
            transform: translateY(-12px);
            border-color: white;
            box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.3);
        }

        .product-card:hover::before {
            left: 100%;
        }

        .product-image-container {
            width: 100%;
            aspect-ratio: 1/1;
            background: rgba(255, 255, 255, 0.2);
            border-radius: clamp(20px, 3vw, 28px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .product-card:hover .product-image-container {
            border-color: white;
            transform: scale(1.02);
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-icon-fallback {
            font-size: clamp(3rem, 6vw, 4rem);
            color: white;
        }

        .product-title {
            font-size: clamp(1.4rem, 5vw, 1.8rem);
            font-weight: 700;
            color: white;
            margin-bottom: 12px;
            line-height: 1.3;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .product-price {
            font-size: clamp(1.8rem, 6vw, 2.2rem);
            font-weight: 800;
            color: white;
            margin-bottom: 16px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .product-stock {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 40px;
            font-size: 0.95rem;
            color: white;
            margin-bottom: 20px;
        }

        .btn-primary {
            background: white;
            color: #0284c7;
            font-weight: 700;
            padding: 18px 36px;
            border-radius: 18px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 1.1rem;
            width: 100%;
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: 0 25px 40px -10px rgba(0, 0, 0, 0.3);
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::after {
            left: 100%;
        }

        .btn-secondary {
            background: transparent;
            color: white;
            font-weight: 600;
            padding: 16px 32px;
            border-radius: 16px;
            border: 2px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1rem;
        }

        .btn-secondary:hover {
            background: white;
            color: #0284c7;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px -8px rgba(0, 0, 0, 0.2);
        }

        /* Stat Cards */
        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 32px;
            padding: clamp(28px, 5vw, 36px);
            text-align: center;
            transition: all 0.3s ease;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            border-color: white;
            box-shadow: 0 40px 60px -20px rgba(0, 0, 0, 0.2);
        }

        .stat-icon {
            width: 90px;
            height: 90px;
            background: white;
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 28px;
            transition: all 0.3s ease;
            color: #0284c7;
        }

        .stat-card:hover .stat-icon {
            transform: rotate(5deg) scale(1.1);
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2);
        }

        .stat-number {
            font-size: clamp(2rem, 6vw, 2.8rem);
            font-weight: 800;
            color: white;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Feature Items */
        .feature-item {
            text-align: center;
            padding: 28px;
            border-radius: 28px;
            transition: all 0.3s ease;
            height: 100%;
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .feature-icon {
            width: 90px;
            height: 90px;
            background: white;
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 28px;
            transition: all 0.3s ease;
            color: #0284c7;
        }

        .feature-item:hover .feature-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 36px;
            padding: clamp(32px, 6vw, 48px);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 60px 120px rgba(0, 0, 0, 0.3);
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-close {
            position: absolute;
            top: 24px;
            right: 24px;
            color: white;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-close:hover {
            background: white;
            color: #0284c7;
            transform: rotate(90deg);
        }

        /* Form */
        .form-input, .form-select {
            width: 100%;
            padding: 18px 22px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: white;
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 18px center;
            background-size: 20px;
            padding-right: 50px;
        }

        .form-select option {
            background: #0284c7;
            color: white;
        }

        /* Category Pills */
        .category-pill {
            display: inline-block;
            padding: 12px 28px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 6px;
        }

        .category-pill:hover,
        .category-pill.active {
            background: white;
            color: #0284c7;
            transform: translateY(-4px);
            box-shadow: 0 20px 30px -10px rgba(0, 0, 0, 0.2);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 20px;
            left: 20px;
            margin: 0 auto;
            max-width: 400px;
            padding: 18px 28px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: slideInUp 0.3s ease;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Footer */
        .footer {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding: 70px 0 40px;
            margin-top: 100px;
        }

        .footer-link {
            color: white;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            display: inline-block;
            padding: 5px 0;
            opacity: 0.8;
        }

        .footer-link:hover {
            color: white;
            opacity: 1;
            transform: translateX(5px);
        }

        .social-icon {
            width: 52px;
            height: 52px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: white;
            font-size: 1.4rem;
        }

        .social-icon:hover {
            background: white;
            color: #0284c7;
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 20px 30px -8px rgba(0, 0, 0, 0.2);
        }

        /* Loading Spinner */
        .spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .stat-icon {
                width: 80px;
                height: 80px;
            }
            .feature-icon {
                width: 80px;
                height: 80px;
            }
        }

        @media (max-width: 768px) {
            .banner-container {
                height: 250px;
            }
            
            .stat-card {
                padding: 24px;
            }
            
            .stat-icon {
                width: 70px;
                height: 70px;
                margin-bottom: 20px;
            }
            
            .stat-number {
                font-size: 1.8rem;
            }
            
            .feature-icon {
                width: 70px;
                height: 70px;
            }
            
            .modal-content {
                padding: 28px;
            }
            
            .btn-primary {
                padding: 16px 28px;
            }
        }

        @media (max-width: 640px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-card {
                padding: 24px;
            }
            
            .product-price {
                font-size: 1.8rem;
            }
            
            .category-pill {
                padding: 10px 22px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .stat-icon {
                width: 60px;
                height: 60px;
            }
            .feature-icon {
                width: 60px;
                height: 60px;
            }
            .stat-number {
                font-size: 1.5rem;
            }
        }

        /* Touch Optimizations */
        @media (hover: none) and (pointer: coarse) {
            .product-card:hover,
            .stat-card:hover,
            .btn-primary:hover,
            .category-pill:hover {
                transform: none;
            }
            
            .product-card:active,
            .stat-card:active,
            .btn-primary:active,
            .category-pill:active {
                transform: scale(0.98);
            }
        }

        /* Safe Area Support */
        @supports (padding-top: env(safe-area-inset-top)) {
            .navbar {
                padding-top: env(safe-area-inset-top);
            }
            .footer {
                padding-bottom: env(safe-area-inset-bottom);
            }
        }

        /* Utility Classes */
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hover-lift {
            transition: transform 0.3s ease;
        }

        .hover-lift:hover {
            transform: translateY(-4px);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 py-3 sm:py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2 sm:gap-4">
                <img src="/img/logo.png" alt="LyyShop ID Logo" class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl object-cover border-2 border-white shadow-lg">
                <div>
                    <span class="text-xl sm:text-2xl font-bold block leading-tight text-white">LyyTech<span class="text-white">ID</span></span>
                    <span class="text-xs text-white/80 hidden sm:block">Premium Digital Store</span>
                </div>
            </div>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center gap-6 lg:gap-8">
                <a href="#home" class="nav-link">Home</a>
                <a href="#products" class="nav-link">Products</a>
                <a href="#categories" class="nav-link">Categories</a>
                <a href="#features" class="nav-link">Features</a>
            </div>
            
            <!-- Mobile Menu Button -->
            <button id="mobileMenuBtn" class="md:hidden text-white text-2xl p-2 hover:bg-white/20 rounded-xl transition">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="https://wa.me/6282118028950" target="_blank" class="btn-primary hidden sm:flex items-center gap-2 w-auto px-6 py-3 text-[#0284c7]">
                <i class="fab fa-whatsapp text-xl"></i>
                <span class="hidden lg:inline">Contact</span>
            </a>
        </div>
        
        <!-- Mobile Menu Dropdown -->
        <div id="mobileMenu" class="md:hidden hidden mt-4 bg-white/20 backdrop-blur-lg rounded-2xl p-4 border border-white/30 mx-4">
            <a href="#home" class="block py-3 px-4 hover:bg-white/20 rounded-xl transition text-white font-medium">Home</a>
            <a href="#products" class="block py-3 px-4 hover:bg-white/20 rounded-xl transition text-white font-medium">Products</a>
            <a href="#categories" class="block py-3 px-4 hover:bg-white/20 rounded-xl transition text-white font-medium">Categories</a>
            <a href="#features" class="block py-3 px-4 hover:bg-white/20 rounded-xl transition text-white font-medium">Features</a>
            <a href="https://wa.me/6282118028950" target="_blank" class="block py-3 px-4 bg-white text-[#0284c7] rounded-xl mt-2 text-center font-bold">
                <i class="fab fa-whatsapp mr-2"></i>Contact
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-28 sm:pt-32 pb-12 px-4 max-w-7xl mx-auto">
        <!-- Banner Section -->
        <section id="home" class="mb-20 sm:mb-24" data-aos="fade-up">
            <div class="banner-container">
                <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80" 
                     alt="LyyShop ID Banner - Premium Game & Streaming Accounts" 
                     class="banner-image">
                <div class="banner-overlay"></div>
            </div>
            
            <div class="text-center mt-10 sm:mt-16">
                <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-6 sm:mb-8 text-white text-shadow">
                    Premium Digital Accounts
                </h1>
                <p class="text-lg sm:text-xl md:text-2xl text-white/90 max-w-3xl mx-auto px-4 leading-relaxed">
                    Dapatkan akun game premium & streaming (Netflix, Spotify, Viu, dll) dengan harga termurah, proses instan, dan garansi 100%!
                </p>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 sm:gap-7 mb-20 sm:mb-24">
            <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
                <div class="stat-icon">
                    <i class="fas fa-users text-3xl sm:text-4xl"></i>
                </div>
                <div class="stat-number">15.2K+</div>
                <div class="text-white/90 text-base sm:text-lg font-medium">Happy Customers</div>
                <div class="text-sm text-white/70 mt-2">Trusted since 2023</div>
            </div>
            
            <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
                <div class="stat-icon">
                    <i class="fas fa-gamepad text-3xl sm:text-4xl"></i>
                </div>
                <div class="stat-number">8.7K+</div>
                <div class="text-white/90 text-base sm:text-lg font-medium">Accounts Sold</div>
                <div class="text-sm text-white/70 mt-2">Verified accounts</div>
            </div>
            
            <div class="stat-card" data-aos="fade-up" data-aos-delay="300">
                <div class="stat-icon">
                    <i class="fas fa-bolt text-3xl sm:text-4xl"></i>
                </div>
                <div class="stat-number">Instant</div>
                <div class="text-white/90 text-base sm:text-lg font-medium">Delivery</div>
                <div class="text-sm text-white/70 mt-2">After payment</div>
            </div>

            <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
                <div class="stat-icon">
                    <i class="fas fa-shield-alt text-3xl sm:text-4xl"></i>
                </div>
                <div class="stat-number">100%</div>
                <div class="text-white/90 text-base sm:text-lg font-medium">Garansi</div>
                <div class="text-sm text-white/70 mt-2">Money back guarantee</div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="categories" class="mb-20 sm:mb-24">
            <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-center mb-12 sm:mb-16 text-white text-shadow" data-aos="fade-up">
                Browse <span class="text-white">Categories</span>
            </h2>
            
            <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-10" data-aos="fade-up">
                <button class="category-pill active" data-category="all">All Products</button>
                <button class="category-pill" data-category="game">üéÆ Games</button>
                <button class="category-pill" data-category="streaming">üì∫ Streaming</button>
                <button class="category-pill" data-category="music">üéµ Music</button>
                <button class="category-pill" data-category="trial">‚è±Ô∏è Trial</button>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="mb-20 sm:mb-24">
            <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-center mb-12 sm:mb-16 text-white text-shadow" data-aos="fade-up">
                Our <span class="text-white">Premium Products</span>
            </h2>
            
            <!-- Loading State -->
            <div id="loadingContainer" class="flex justify-center items-center py-20 hidden" data-aos="fade-up">
                <div class="spinner"></div>
                <span class="ml-4 text-white text-xl">Loading products...</span>
            </div>
            
            <!-- Error State -->
            <div id="errorContainer" class="hidden text-center py-20" data-aos="fade-up">
                <i class="fas fa-exclamation-triangle text-6xl text-yellow-400 mb-6"></i>
                <p class="text-white text-xl mb-6">Failed to load products. Please refresh the page.</p>
                <button onclick="loadProducts()" class="btn-primary w-auto px-12 py-4 text-lg">
                    <i class="fas fa-sync-alt mr-2"></i>Retry
                </button>
            </div>
            
            <!-- Products Grid -->
            <div id="productContainer" class="products-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-7">
                <!-- Products will be loaded here via JavaScript -->
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-7 sm:gap-8 mb-20 sm:mb-24">
            <div class="feature-item" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt text-3xl sm:text-4xl"></i>
                </div>
                <h3 class="font-bold text-2xl sm:text-3xl mb-3 text-white">100% Secure</h3>
                <p class="text-white/80 text-base sm:text-lg">All accounts are verified and guaranteed original</p>
            </div>
            
            <div class="feature-item" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-icon">
                    <i class="fas fa-bolt text-3xl sm:text-4xl"></i>
                </div>
                <h3 class="font-bold text-2xl sm:text-3xl mb-3 text-white">Instant Delivery</h3>
                <p class="text-white/80 text-base sm:text-lg">Receive account details immediately after payment</p>
            </div>
            
            <div class="feature-item" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-icon">
                    <i class="fas fa-headset text-3xl sm:text-4xl"></i>
                </div>
                <h3 class="font-bold text-2xl sm:text-3xl mb-3 text-white">24/7 Support</h3>
                <p class="text-white/80 text-base sm:text-lg">Our team is always ready to help you anytime</p>
            </div>
            
            <div class="feature-item" data-aos="fade-up" data-aos-delay="400">
                <div class="feature-icon">
                    <i class="fas fa-money-bill-wave text-3xl sm:text-4xl"></i>
                </div>
                <h3 class="font-bold text-2xl sm:text-3xl mb-3 text-white">Best Price</h3>
                <p class="text-white/80 text-base sm:text-lg">Competitive prices with regular promotions</p>
            </div>
        </section>

        <!-- Payment Methods -->
        <section class="mb-20 sm:mb-24">
            <h2 class="text-2xl sm:text-3xl font-bold text-center mb-10 text-white" data-aos="fade-up">
                Payment Methods
            </h2>
            <div class="flex flex-wrap justify-center gap-4" data-aos="fade-up">
                <div class="bg-white/20 px-8 py-4 rounded-2xl border border-white/30 backdrop-blur-sm text-white font-medium">
                    <i class="fas fa-credit-card mr-2"></i>
                    <span>QRIS</span>
                </div>
                <div class="bg-white/20 px-8 py-4 rounded-2xl border border-white/30 backdrop-blur-sm text-white font-medium">
                    <i class="fas fa-university mr-2"></i>
                    <span>Bank Transfer</span>
                </div>
                <div class="bg-white/20 px-8 py-4 rounded-2xl border border-white/30 backdrop-blur-sm text-white font-medium">
                    <i class="fas fa-wallet mr-2"></i>
                    <span>E-Wallet</span>
                </div>
                <div class="bg-white/20 px-8 py-4 rounded-2xl border border-white/30 backdrop-blur-sm text-white font-medium">
                    <i class="fas fa-mobile-alt mr-2"></i>
                    <span>Pulsa</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 sm:gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-4 mb-6">
                        <img src="/img/logo.png" alt="LyyShop ID Logo" class="w-14 h-14 rounded-xl border-2 border-white">
                        <span class="text-3xl font-bold text-white">LyyTech<span class="text-white">ID</span></span>
                    </div>
                    <p class="text-white/80 text-base mb-6 leading-relaxed">
                        Toko digital terpercaya sejak 2023. Menyediakan berbagai akun premium game dan streaming dengan harga termurah dan garansi 100%.
                    </p>
                    <div class="flex gap-4">
                        <a href="https://instagram.com/lyytechid" target="_blank" class="social-icon">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://tiktok.com/@lyytechid" target="_blank" class="social-icon">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="#" class="social-icon">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="https://wa.me/6282118028950" target="_blank" class="social-icon">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold text-2xl mb-6 text-white">Quick Links</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>About Us</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Terms of Service</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Privacy Policy</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>FAQ</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Refund Policy</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold text-2xl mb-6 text-white">Categories</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Game Accounts</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Netflix Premium</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Spotify Premium</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Viu Premium</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-chevron-right text-xs mr-2"></i>Free Trial</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold text-2xl mb-6 text-white">Contact</h4>
                    <ul class="space-y-4">
                        <li class="flex items-center gap-3">
                            <i class="fas fa-envelope text-2xl"></i>
                            <span class="footer-link">support@lyytech.id</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-phone text-2xl"></i>
                            <span class="footer-link">+62 821 1802 8950</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-map-marker-alt text-2xl"></i>
                            <span class="footer-link">Jakarta, Indonesia</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <i class="fas fa-clock text-2xl"></i>
                            <span class="footer-link">24/7 Online</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-white/30 pt-8 text-center">
                <p class="text-white/80 text-base">&copy; 2024 LyyShop ID. All rights reserved.</p>
                <p class="text-white/60 text-sm mt-3">Made with <i class="fas fa-heart text-white"></i> for Indonesian gamers</p>
            </div>
        </div>
    </footer>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal-overlay">
        <div class="modal-content relative">
            <span class="modal-close" onclick="closeCheckoutModal()">&times;</span>
            
            <h2 class="text-3xl sm:text-4xl font-bold mb-2 text-white">Complete Your Order</h2>
            <p class="text-white/80 text-base mb-6">Fill in your details to proceed</p>
            
            <div id="selectedProductInfo" class="bg-white/20 rounded-xl p-6 mb-6 border border-white/30">
                <p id="selectedProductName" class="text-xl font-semibold text-white"></p>
                <p id="selectedProductPrice" class="text-3xl font-bold mt-2 text-white"></p>
            </div>
            
            <form id="checkoutForm" class="space-y-5">
                <div>
                    <label class="block text-white/90 text-sm mb-2 font-medium">Email Address</label>
                    <input 
                        type="email"
                        id="customerEmail"
                        placeholder="your@email.com"
                        required
                        class="form-input"
                    >
                    <p class="text-xs text-white/70 mt-2">Account details will be sent here</p>
                </div>
                
                <div>
                    <label class="block text-white/90 text-sm mb-2 font-medium">Payment Method</label>
                    <select id="paymentMethod" class="form-select" required>
                        <option value="">Select payment method</option>
                    </select>
                </div>
                
                <button type="submit" id="payButton" class="btn-primary mt-6">
                    <i class="fas fa-shopping-cart mr-2"></i>
                    Continue to Payment
                </button>
            </form>
            
            <div id="paymentInfo" class="bg-white/20 rounded-xl p-6 mt-6 border border-white/30 hidden">
                <h3 class="font-bold text-xl mb-3 text-white">Payment Details</h3>
                <div id="paymentDetails" class="space-y-2 text-sm text-white/90"></div>
                <div class="flex flex-col sm:flex-row gap-3 mt-5">
                    <a href="#" id="paymentLink" target="_blank" class="flex-1 btn-primary text-center text-sm py-3">
                        Pay Now
                    </a>
                    <button id="checkStatus" class="flex-1 btn-secondary text-sm py-3">
                        Check Status
                    </button>
                </div>
            </div>
            
            <div class="text-center text-xs text-white/70 mt-5">
                <i class="fas fa-lock mr-1"></i> Secure payment
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="text-7xl sm:text-8xl mb-6 animate-bounce">üéâ</div>
            <h2 class="text-3xl sm:text-4xl font-bold mb-4 text-white">Payment Successful!</h2>
            <p class="mb-3 text-white/90 text-lg">Your account details have been sent to:</p>
            <p id="successEmail" class="text-white font-bold text-xl mb-6 break-all"></p>
            
            <div class="bg-white/20 p-6 rounded-xl mb-6 border border-white/30">
                <p class="text-base text-white/90 mb-3">Check your email inbox (or spam folder)</p>
                <i class="fas fa-envelope-open-text text-5xl text-white"></i>
            </div>
            
            <div class="flex flex-col sm:flex-row gap-3">
                <button onclick="closeSuccessModal()" class="flex-1 btn-primary">
                    Got It
                </button>
                <a href="#products" onclick="closeSuccessModal()" class="flex-1 btn-secondary">
                    Shop Again
                </a>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true,
            offset: 50
        });

        let currentProduct = null;
        let currentOrderId = null;
        let statusChecker = null;
        let allProducts = [];

        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        });

        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('mobileMenu').classList.add('hidden');
            });
        });

        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        document.querySelectorAll('.category-pill').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-pill').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                filterProducts(this.dataset.category);
            });
        });

        function filterProducts(category) {
            if (category === 'all') {
                displayProducts(allProducts);
            } else {
                const filtered = allProducts.filter(p => p.category === category);
                displayProducts(filtered);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            loadPaymentMethods();
        });

        async function loadProducts() {
            try {
                showLoading(true);
                document.getElementById('errorContainer').classList.add('hidden');
                
                const res = await fetch('/api/roles');
                if (!res.ok) throw new Error('Failed to load products');
                
                const data = await res.json();
                allProducts = data.roles || [];
                
                allProducts = allProducts.map(product => {
                    let category = 'game';
                    const name = (product.name || '').toLowerCase();
                    const desc = (product.description || '').toLowerCase();
                    
                    if (name.includes('netflix') || name.includes('viu') || desc.includes('streaming') || name.includes('disney') || name.includes('hbo') || name.includes('prime')) {
                        category = 'streaming';
                    } else if (name.includes('spotify') || name.includes('music') || name.includes('joox') || name.includes('langit musik') || name.includes('youtube music')) {
                        category = 'music';
                    } else if (name.includes('trial') || name.includes('coba') || desc.includes('trial') || name.includes('free')) {
                        category = 'trial';
                    }
                    
                    return { ...product, category };
                });
                
                displayProducts(allProducts);
                updateProductSchema(allProducts);
                
            } catch (error) {
                console.error('Error loading products:', error);
                document.getElementById('errorContainer').classList.remove('hidden');
                showToast('Failed to load products', 'error');
            } finally {
                showLoading(false);
            }
        }

        function updateProductSchema(products) {
            const productSchema = {
                "@context": "https://schema.org",
                "@type": "ItemList",
                "itemListElement": products.slice(0, 10).map((product, index) => ({
                    "@type": "Product",
                    "position": index + 1,
                    "name": product.name,
                    "description": product.description || product.name,
                    "image": product.image || '',
                    "offers": {
                        "@type": "Offer",
                        "price": product.price,
                        "priceCurrency": "IDR",
                        "availability": parseInt(product.stock) > 0 ? "https://schema.org/InStock" : "https://schema.org/OutOfStock"
                    }
                }))
            };
            
            document.getElementById('productSchema').textContent = JSON.stringify(productSchema);
        }

        function handleImageError(img) {
            const container = img.parentElement;
            img.style.display = 'none';
            
            const fallbackIcon = document.createElement('i');
            fallbackIcon.className = 'fas fa-crown product-icon-fallback';
            container.appendChild(fallbackIcon);
            
            container.classList.add('img-error');
        }

        function displayProducts(products) {
            const container = document.getElementById('productContainer');
            if (!products || products.length === 0) {
                container.innerHTML = '<p class="text-center text-white/90 col-span-full py-20 text-xl">No products available</p>';
                return;
            }

            container.innerHTML = products.map(product => {
                const price = Number(product.price) || 0;
                const stock = Number(product.stock) || 0;
                const isOutOfStock = stock <= 0;
                const imageUrl = product.image || '';
                const category = product.category || 'game';

                const safeName = escapeHtml(product.name);
                const safeDescription = escapeHtml(product.description || 'Premium account with full features');

                return `
                    <div class="product-card" data-aos="fade-up">
                        <div class="product-image-container" id="img-container-${product.id}">
                            ${imageUrl ? 
                                `<img src="${imageUrl}" 
                                     alt="${safeName}" 
                                     class="product-image"
                                     loading="lazy"
                                     onerror="handleImageError(this)"
                                     data-product-id="${product.id}">` 
                                : `<i class="fas fa-crown product-icon-fallback"></i>`
                            }
                        </div>
                        <h3 class="product-title">${safeName}</h3>
                        <div class="product-price">Rp ${price.toLocaleString('id-ID')}</div>
                        <div class="product-stock">
                            <i class="fas fa-box"></i>
                            <span>Stock: ${stock}</span>
                        </div>
                        <p class="text-white/80 text-base mb-5">${safeDescription}</p>
                        <button 
                            onclick='openCheckout(${JSON.stringify({
                                id: product.id,
                                name: product.name,
                                price: price,
                                category: category
                            }).replace(/'/g, "&apos;")})'
                            class="btn-primary ${isOutOfStock ? 'opacity-50 cursor-not-allowed' : ''}"
                            ${isOutOfStock ? 'disabled' : ''}>
                            <i class="fas ${getCategoryIcon(category)}"></i>
                            ${isOutOfStock ? 'Out of Stock' : 'Buy Now'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function getCategoryIcon(category) {
            const icons = {
                game: 'fa-gamepad',
                streaming: 'fa-film',
                music: 'fa-music',
                trial: 'fa-hourglass-half'
            };
            return icons[category] || 'fa-crown';
        }

        async function loadPaymentMethods() {
            try {
                let methods = [];
                
                try {
                    const res = await fetch('/api/payment/methods');
                    if (res.ok) {
                        const data = await res.json();
                        methods = data.methods || [];
                    }
                } catch (e) {
                    console.log('Using default payment methods');
                }
                
                if (methods.length === 0) {
                    methods = [
                        { id: 'qris', name: 'QRIS (All E-Wallet)' },
                        { id: 'bca', name: 'Bank BCA' },
                        { id: 'mandiri', name: 'Bank Mandiri' },
                        { id: 'bri', name: 'Bank BRI' },
                        { id: 'bni', name: 'Bank BNI' },
                        { id: 'ovo', name: 'OVO' },
                        { id: 'gopay', name: 'GoPay' },
                        { id: 'dana', name: 'DANA' },
                        { id: 'linkaja', name: 'LinkAja' },
                        { id: 'pulsa', name: 'Pulsa (Telkomsel/XL)' }
                    ];
                }
                
                const select = document.getElementById('paymentMethod');
                select.innerHTML = '<option value="">Select Payment Method</option>';
                methods.forEach(m => {
                    select.innerHTML += `<option value="${m.id}">${escapeHtml(m.name)}</option>`;
                });
            } catch (error) {
                console.error('Error loading payment methods:', error);
            }
        }

        function openCheckout(product) {
            currentProduct = product;
            document.getElementById('selectedProductName').textContent = product.name;
            document.getElementById('selectedProductPrice').textContent = `Rp ${product.price.toLocaleString('id-ID')}`;
            document.getElementById('checkoutModal').classList.add('active');
            document.getElementById('paymentInfo').classList.add('hidden');
            document.getElementById('customerEmail').value = '';
            document.body.style.overflow = 'hidden';
        }

        function closeCheckoutModal() {
            document.getElementById('checkoutModal').classList.remove('active');
            document.body.style.overflow = '';
            if (statusChecker) clearInterval(statusChecker);
        }

        document.getElementById('checkoutForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('customerEmail').value.trim();
            const paymentMethod = document.getElementById('paymentMethod').value;

            if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }

            if (!paymentMethod) {
                showToast('Please select payment method', 'error');
                return;
            }

            const payButton = document.getElementById('payButton');
            payButton.disabled = true;
            payButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';

            try {
                const res = await fetch('/api/payment/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: email,
                        roleId: currentProduct.id,
                        paymentMethod
                    })
                });

                const data = await res.json();

                if (data.success) {
                    currentOrderId = data.orderId;
                    
                    document.getElementById('paymentInfo').classList.remove('hidden');
                    
                    const paymentLink = data.redirectUrl || data.payment?.url;
                    if (paymentLink) {
                        document.getElementById('paymentLink').href = paymentLink;
                        document.getElementById('paymentLink').style.display = 'flex';
                    } else {
                        document.getElementById('paymentLink').style.display = 'none';
                    }

                    const paymentDetails = document.getElementById('paymentDetails');
                    paymentDetails.innerHTML = `
                        <div class="flex justify-between py-2 border-b border-white/30">
                            <span class="text-white/70">Order ID</span>
                            <span class="text-white font-mono">${data.orderId}</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-white/30">
                            <span class="text-white/70">Total</span>
                            <span class="text-white">Rp ${(data.amount || currentProduct.price).toLocaleString('id-ID')}</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-white/30">
                            <span class="text-white/70">Method</span>
                            <span class="text-white">${getPaymentMethodName(paymentMethod)}</span>
                        </div>
                        <div class="flex justify-between py-2">
                            <span class="text-white/70">Status</span>
                            <span class="text-yellow-300">Waiting Payment</span>
                        </div>
                    `;

                    startStatusCheck(data.orderId);
                    showToast('Payment created successfully', 'success');
                } else {
                    showToast(data.error || 'Failed to create payment', 'error');
                }
            } catch (error) {
                showToast('An error occurred', 'error');
                console.error('Payment error:', error);
            } finally {
                payButton.disabled = false;
                payButton.innerHTML = '<i class="fas fa-shopping-cart mr-2"></i> Continue to Payment';
            }
        });

        function getPaymentMethodName(methodId) {
            const methods = {
                'qris': 'QRIS',
                'bca': 'Bank BCA',
                'mandiri': 'Bank Mandiri',
                'bri': 'Bank BRI',
                'bni': 'Bank BNI',
                'ovo': 'OVO',
                'gopay': 'GoPay',
                'dana': 'DANA',
                'linkaja': 'LinkAja',
                'pulsa': 'Pulsa'
            };
            return methods[methodId] || methodId;
        }

        function startStatusCheck(orderId) {
            if (statusChecker) clearInterval(statusChecker);

            statusChecker = setInterval(async () => {
                try {
                    const res = await fetch('/api/order/' + orderId);
                    const data = await res.json();

                    if (data.order?.status === 'completed') {
                        clearInterval(statusChecker);
                        
                        closeCheckoutModal();
                        
                        document.getElementById('successEmail').textContent = document.getElementById('customerEmail').value;
                        document.getElementById('successModal').classList.add('active');
                        
                        showToast('Payment successful!', 'success');
                    }
                } catch (error) {
                    console.error('Status check error:', error);
                }
            }, 5000);
        }

        document.getElementById('checkStatus').addEventListener('click', async () => {
            if (!currentOrderId) return;
            
            try {
                const res = await fetch('/api/order/' + currentOrderId);
                const data = await res.json();

                if (data.order?.status === 'completed') {
                    clearInterval(statusChecker);
                    closeCheckoutModal();
                    document.getElementById('successEmail').textContent = document.getElementById('customerEmail').value;
                    document.getElementById('successModal').classList.add('active');
                } else {
                    showToast(`Status: ${data.order?.status || 'PENDING'}`, 'info');
                }
            } catch (error) {
                showToast('Failed to check status', 'error');
            }
        });

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
            document.body.style.overflow = '';
            loadProducts();
        }

        function showLoading(show) {
            const loadingContainer = document.getElementById('loadingContainer');
            if (show) {
                loadingContainer.classList.remove('hidden');
            } else {
                loadingContainer.classList.add('hidden');
            }
        }

        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${
                type === 'error' ? 'bg-red-500/30 border-red-500/50' : 
                type === 'success' ? 'bg-green-500/30 border-green-500/50' : 
                'bg-blue-500/30 border-blue-500/50'
            }`;
            toast.classList.remove('hidden');

            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                    if (overlay.id === 'checkoutModal' && statusChecker) {
                        clearInterval(statusChecker);
                    }
                }
            });
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    if (modal.id === 'checkoutModal' && statusChecker) {
                        clearInterval(statusChecker);
                    }
                });
            }
        });

        window.handleImageError = handleImageError;
    </script>
</body>
</html>
